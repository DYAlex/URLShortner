# URL Shortener

Сервис для сокращения ссылок на Java с использованием Spring Boot.
Для хранения данных используется PostgreSQL, который можно развернуть через docker compose

## Как пользоваться сервисом

1. Запустите `compose.yml`
2. Запустите проект через вашу IDE (например, IntelliJ IDEA). Новая база данных будет автоматически проинициализирована с помощью Flyway.
3. Сервис будет доступен по адресу: http://localhost:8080.

## Поддерживаемые команды

0. Главная страница приложения
URL: GET http://localhost:8080
Здесь находится форма для сокращения ссылок, а также отображается таблица со всеми имеющимися в базе данных ссылками для текущего пользователя. 

1. Сокращение ссылки
URL: POST http://localhost:8080/api/urls/shorten
При этом есть возможность задать количество переходов и время жизни ссылки. Если данные параметры не переданы пользователем, то используются значение из `application.yml`

2. Редактирование количества переходов по ссылке (доступно только создателю ссылки)
URL: PUT http://localhost:8080/api/urls/{shortUrl}
Кнопка `Edit max follows` в таблице со ссылками

3. Удаление ссылки (доступно только создателю ссылки)
URL: DELETE http://localhost:8080/api/urls/{shortUrl}
Кнопка `Delete` в таблице со ссылками

4. Выход из системы
URL: POST http://localhost:8080/logout

5. Войти в систему
URL: POST http://localhost:8080/setCookies
Форма для ввода UUID на главной странице приложения

6. Автоматическое удаление ссылок. Работает под капотом на аннотациях.

7. Переход по ссылке
URL: GET http://localhost:8080/api/urls/{shortUrl}
При вводе короткой ссылки, осуществляется переход по полному адресу URL и увеличивается счетчик переходов.

8. Уведомление об истечение срока действия ссылки или количества переходов
URL: GET http://localhost:8080/api/urls/{shortUrl}
При переходе по еще существующей короткой ссылке, у которой исчерпан лимит переходов или время жизни, пользователь получает уведомление о том, что она просрочена.

9. Идентификация по UUID
При первой генерации ссылки, система сохраняет в браузере куки `uuidCookie`, если такого еще нет. Данный куки используется для идентификации пользователя т обнуляется при выходе из системы (см. п. 4).

10. Просмотр своего UUID
URL: GET http://localhost:8080/welcome